<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>유사 문제 도전</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background-color: #f7fbff;
    }
    h1 {
      color: #337ab7;
      text-align: center;
    }
    .question-box {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      max-width: 600px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .question-box h2 {
      margin-top: 0;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>틀린 문제 기반 유사 문제 도전</h1>
  <div id="questions-container">
    <!-- 여기에 유사 문제가 동적으로 생성됨 -->
  </div>

  <script>
    const similarProblems = {
      1: {
        question: "다음 중 함수 \( f(x) = x^2 \)의 도함수로 알맞은 것은?",
        choices: ["1. \( f'(x) = x \)", "2. \( f'(x) = 2x \)", "3. \( f'(x) = x^2 \)", "4. \( f'(x) = 2 \)", "5. \( f'(x) = x+1 \)"]
      },
      2: {
        question: "다음 극한을 구하세요: \( \\lim_{x \\to 0} \\frac{e^x - 1}{x} \)",
        choices: ["1. 0", "2. 1", "3. 무한대", "4. 존재하지 않음", "5. e"]
      },
      3: {
        question: "함수 \( f(x) = \\frac{2x + x^3}{1 + x^2} \)의 극한 \( \\lim_{x \\to \infty} f(x) \)는?",
        choices: ["1. 0", "2. 1", "3. 2", "4. ∞", "5. 존재하지 않음"]
      }
    };

    function renderSimilarProblems() {
      const container = document.getElementById("questions-container");
      const wrongProblems = JSON.parse(localStorage.getItem("wrongProblems")) || [];

      if (wrongProblems.length === 0) {
        container.innerHTML = "<p>틀린 문제가 없어 유사 문제를 생성할 수 없습니다. 진단 평가를 먼저 진행하세요.</p>";
        return;
      }

      wrongProblems.forEach((problemNumber) => {
        const problem = similarProblems[problemNumber];
        if (problem) {
          const box = document.createElement("div");
          box.className = "question-box";

          let html = `<h2>문제 ${problemNumber} - ${problem.question}</h2><ul>`;
          for (const choice of problem.choices) {
            html += `<li>${choice}</li>`;
          }
          html += "</ul>";
          box.innerHTML = html;

          container.appendChild(box);
        }
      });
    }

    window.onload = renderSimilarProblems;
  </script>
</body>
</html>
